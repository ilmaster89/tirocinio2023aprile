<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Area Admin</h1>
    <h3>Elimina Prodotti</h3>

    <div th:each="p: ${prodotti}">
        <p th:text="${p.nome}"></p>
        <p><span>Elimina</span><input class="check" type="checkbox" th:value="${p.id}"></p>
    </div>
    <p><button onclick="execute()">Esegui</button></p>
</body>

<script>

    execute = () => {
        let checkedValues = []
        let checkboxes = document.getElementsByClassName("check")

        for (let i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].checked)
                checkedValues.push(checkboxes[i].value)
        }

        let list = checkedValues.join(",")

        window.location = "/aggiorna?lista=" + list
    }

</script>

</html>